<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
        <title></title>
        <link rel="stylesheet" href="../../plugins-2.5.5/layui/css/layui.css" media="all" />
        <link rel="stylesheet" href="../../css/global.css" media="all">
        <link rel="stylesheet" type="text/css" href="http://www.jq22.com/jquery/font-awesome.4.6.0.css">
      
</head>
<style>
    .layui-fluid{
        padding: 0; 
        margin:0;
    }
    .layui-card-header{
        border-left: 6px solid #ffaa17;
        border-radius:0;
        border-bottom: 1px solid #ddd;
    }
    .layui-card-header span{
        float: left;
    }
    .layui-card-header button{
        float: right;
        margin: 2px 0;
    }
    .layui-form-item .layui-inline {
        margin-bottom: 25px;
    }

/*     .layui-disabled{
    color: initial;
} */
    .layui-disabled,.layui-disabled:hover{
        color:initial;
        cursor:pointer;
    }
/* 产品类型弹窗 */

.demo-class .layui-layer-title{
    background-color: #fff;
}

.maskData {
  height: 100%;
  display: flex;

}
 .maskData .left1 {
  width: 20%;
  height: 100%;
  border-right: 2px dashed #7B7DE5;
  overflow: hidden;
  margin-left: 10px;
  overflow: hidden;

}
.left1 ::-webkit-scrollbar {
  display: none;
}
.maskData .left1 .slideLeft {
  height: 100%;
  margin-top: 20px;
  overflow-y: auto;
}

.maskData .left1 .mainclassOne {
  width: 80%;
  height: 50px;
  box-shadow: 0 0 10px #dbe7ef;
  font-size: 16px;
  cursor: pointer;
  border: 1px solid white;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  margin-bottom: 6%;
  margin-left: 10%;
  line-height: 50px;
}
.mainclassOne i {
    color: black;
    font-size: 12px;
    position: absolute;
    left: 84%;

}
.maskData .right {
  width: 80%;
  height: 100%;
  padding: 0 1%;
  box-sizing: border-box;
  overflow: hidden;
}
 .maskData .right .choice {
  width: 100%;
  height: 80%;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;
  color: red;
}

.maskData .right .clickThis {

  width: 100%;
  height: 20%;
  
  display: flex;
  box-sizing: border-box;
  justify-content: space-between;
}
.maskData .right .clickThis div {
  width:  30%;
  height: 35px;
  background: #7B7DE5;
  color: white;
  font-size: 15px;
  border-radius: 6px;
  text-align: center;
  line-height: 35px;
  margin: 0 auto;
  cursor: pointer;
}
.maskData .right .rightOne {
  width: 100%;
  height: 100%;
  display: none;
}

.maskData .left1 .pictUp {
  border: 1px solid #7B7DE5;
  color: #7B7DE5;
}
 .maskData .right .rightOne .slideRight {
  width: 105%;
  height: 80%;
  overflow-y: scroll;
  display: flex;
  flex-wrap: wrap;
  padding-right: 1%;
  padding-bottom: 10px;
  box-sizing: border-box;
}
.maskData .right .rightOne .slideRight .subclassOne {
  width: 18%;
  height: 35px;
  line-height: 35px;
  color: #ccc;
  text-align: center;
  font-size: 15px;
  position: relative;
  cursor: pointer;
  border: 1px solid #ccc;
  margin-left: 25px;
  margin-top: 15px;
}
.maskData .right .rightOne .slideRight .subclassOne h4 {
  margin: 0;
  padding: 0;
}
.maskData .right .rightOne .slideRight .subclassOne:hover {
  border: 1px solid #7B7DE5;
}

.maskData .right .rightOne .slideRight .selected {
  border: 1px solid #7B7DE5;
  color: #7B7DE5;
}
.layui-upload-img {
    width: 92px;
    height: 92px;
    margin: 0 10px 10px 0;
}


</style>


<body>




<div class="layui-fluid">
    <div class="layui-card">
    <div class="layui-card-header">
          <span>创建产品</span>
          <button type="button" class="layui-btn layui-btn-warm save">保存</button>
    </div>

    <div class="layui-card-body">
        <form  id="addProductForm" class="layui-form" action="" lay-filter="example">
                <div class="layui-form-item">
                <div class="layui-inline">
                    <label class="layui-form-label">品名:</label>
                    <div class="layui-input-inline">
                        <input type="text" name="productName" placeholder="请输入品名" class="layui-input">
                    </div>
                </div>
                  <div class="layui-inline">
                    <label class="layui-form-label">型号:</label>
                    <div class="layui-input-inline">
                        <input type="text" name="type" placeholder="请输入型号" class="layui-input">
                    </div>
                </div>
                  <div class="layui-inline">
                    <label class="layui-form-label">产地:</label>
                    <div class="layui-input-inline">
                        <input type="text" name="production" placeholder="请输入产地" class="layui-input">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">材质:</label>
                    <div class="layui-input-inline">
                        <input type="text" name="texture" placeholder="请输入产品材质" class="layui-input">
                    </div>
                </div>
                
                <div class="layui-inline">
                    <label class="layui-form-label">尺寸:</label>
                    <div class="layui-input-inline">
                        <input type="text" name="size" placeholder="请输入产品尺寸" class="layui-input">
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">颜色:</label>
                    <div class="layui-input-inline">
                        <input type="text" name="color" placeholder="请输入产品颜色" class="layui-input">
                    </div>
                </div>
                 <div class="layui-inline">
                    <label class="layui-form-label">采购价:</label>
                    <div class="layui-input-inline">
                        <input type="text" name="purchasePrice" placeholder="请输入产品采购价" class="layui-input">
                    </div>
                </div>
                 <div class="layui-inline">
                    <label class="layui-form-label">零售价:</label>
                    <div class="layui-input-inline">
                        <input type="text" name="retailPrice" placeholder="请输入产品零售价" class="layui-input">
                    </div>
                </div>
                <div class="layui-inline">
                        <label class="layui-form-label">产品状态:</label>
                        <div class="layui-input-inline">
                           <select name="conventional">
                            <option value=""></option>
                            <option value="0">常规产品</option>
                            <option value="1">定制产品</option>
                           </select>
                        </div>
                </div>
                 <div class="layui-inline">
                        <label class="layui-form-label">产品货架:</label>
                        <div class="layui-input-inline">
                           <select name="soldOut">
                            <option value=""></option>
                            <option value="0" selected>正常在架</option>
                            <option value="1" >下架产品</option>
                           </select>
                        </div>
                </div>
                 <div class="layui-inline">
                        <label class="layui-form-label">货物状态:</label>
                        <div class="layui-input-inline">
                           <select name="state" >
                            <option value=""></option>
                            <option value="0">整件</option>
                            <option value="2">子件</option>
                            <option value="1">套件</option>
                           </select>
                        </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">产品分类:</label>
                    <div class="layui-input-inline">
                        <select name="productCategoryId" id="productCategoryId">

                        </select>
                    </div>
                </div>
                <div class="layui-inline">
                    <label class="layui-form-label">选择供应商:</label>
                    <div class="layui-input-inline">
                        <select name="purchaseSupplierId" id="productSupplier" >

                        </select>
                    </div>
                </div>
            </div>


        </form>
    </div>
    </div>
</div>

    <script type="text/javascript" src="../../plugins-2.5.5/layui/layui.js"></script>

    <script>
   
        layui.config({//自定义模块路径
            base: '../../js/'
        })
        layui.use(['table','jquery','layer','cookie','form','upload','element','common'], function(){
             var $= layui.jquery;
             var cookie=layui.cookie;
             var form = layui.form;
             var element = layui.element;
             var common = layui.common;
             var layerindex;
             var upload = layui.upload;

        $(document).ready(function () {
            getCategoryOption();
            getSupplierOption();
        });
        //初始化产品类别 operation 选项
        function getCategoryOption() {
            // 请求
            $.ajax({
                type:'POST',
                url:  common.address + 'product/selectCategory',
                data: {
                    "sessionid": $.cookie("sessionid")
                },
                success:function(response){
                    var data=response.data;
                    var content='<option value=""></option>';
                    $.each(data,function(index,value){
                        content+="<option value="+value.id+">"+value.category+"</option>";
                    });
                    $('#productCategoryId').append(content);
                    form.render('select');
                }
            })
        }

            //初始化供应商 operation 选项
            function getSupplierOption() {
                // 请求
                $.ajax({
                    type:'POST',
                    url:  common.address + 'purchase/selectPurchaseSupplier',
                    data: {
                        "sessionid": $.cookie("sessionid")
                    },
                    success:function(response){
                        var data=response.data;
                        console.log(JSON.stringify(data));
                        var content='<option value=""></option>';
                          $.each(data,function(index,value){
                              content+="<option value="+value.id+">"+value.name+"</option>";
                          });
                          $('#productSupplier').append(content);
                          form.render('select');
                    }
                })
            }



            //产品保存
        $(".save").click(function(){
            //关闭当前页面
            //top.layui.element.tabDelete('admin-tab', '12');
            var data = form.val("example");
            var dataObj = new FormData();
            dataObj.append("json",JSON.stringify(data));
           $.ajax({
                url: common.address +  "product/insertProduct?sessionid=" +  $.cookie("sessionid"),
                type: "POST",
                data:dataObj,
                async: false,
                contentType: false,
                processData: false,
                success: (res) => {
                    parent.layui.use(['tab'],function(){
                        var tab = parent.layui.tab({
                            elem: '.admin-nav-card' //设置选项卡容器
                        });
                        //询问框
                        var index = layer.confirm('产品添加成功是否继续添加？', {
                            btn: ['重置','返回产品列表'],//按钮
                        }, function(){
                            $("#addProductForm")[0].reset();
                            layui.form.render();
                            layer.close(index);
                        }, function(){
                            var data = {
                                href: "page/product/productList.html",
                                icon: "fa-table",
                                title: "产品查询",
                                globalTabIdIndex: 11
                            }
                            tab.tabAdd(data);
                        });
                    });
                }
            })
        });




        })
 
 
    </script>
</body>
</html>
